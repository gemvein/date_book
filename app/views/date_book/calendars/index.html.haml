- add_title Calendar.model_name.human.pluralize
= date_book_scripts
.row
  .col-md-3
    %ul.calendars
      - @calendars.each do |calendar|
        %li.calendar{ class: calendar.css_class }
          = link_to calendar.name, calendar
  .col-md-9
    #calendar-display
- add_footer_javascript do
  :javascript
    $(function() {
      $('#calendar-display').fullCalendar({
        events: {
          url: '#{date_book.api_path format: :json}',
          type: 'POST',
          data: { query: calendarEventsQuery },
          success: function(data, status, xhr) {
            data = data.data.event_occurrences;
            new_data = $.map(data, formatEventOccurrence);
            return new_data;
          }
        },
        eventRender: calendarEventRender,
        header: calendarEventHeader,
        firstDay: #{DateBook.week_start_index}
      });
    });
